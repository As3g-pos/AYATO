<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAYA Clothing Store - ูุธุงู ุฅุฏุงุฑุฉ ุงููุญู</title>
    <meta name="description" content="ูุธุงู ุฅุฏุงุฑุฉ ูุญู ุฌุงูุง ููููุงุจุณ ุงููุณุงุฆูุฉ ุงููุงุฎุฑุฉ">
    <link rel="icon" href="logo.jpg" type="image/jpeg">
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&family=Playfair+Display:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
</head>

<body>
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <!-- ============ LOGIN PAGE ============ -->
    <div id="loginPage" class="login-page">
        <div class="login-bg-particles" id="particles"></div>
        <div class="login-container">
            <div class="login-logo">
                <img src="logo.jpg" alt="JAYA Logo">
            </div>
            <h1 class="login-title">JAYA</h1>
            <p class="login-subtitle">Clothing Store Management</p>
            <form id="loginForm" class="login-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="loginUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู" required autocomplete="username">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="loginPassword" placeholder="ูููุฉ ุงููุฑูุฑ" required
                        autocomplete="current-password">
                </div>
                <button type="submit" class="btn-login" id="loginBtn">
                    <span>ุชุณุฌูู ุงูุฏุฎูู</span>
                    <i class="fas fa-arrow-left"></i>
                </button>

            </form>
        </div>
    </div>

    <!-- ============ MAIN APP ============ -->
    <div id="mainApp" class="main-app hidden">

        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="logo.jpg" alt="JAYA" class="sidebar-logo">
                <h2 class="sidebar-brand">JAYA</h2>
                <button class="sidebar-toggle-btn" id="sidebarToggleBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <button class="mobile-close-btn" id="sidebarCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-link active" data-page="dashboard">
                    <i class="fas fa-chart-pie"></i>
                    <span>ููุญุฉ ุงูุชุญูู</span>
                </a>
                <a href="#" class="nav-link" data-page="products">
                    <i class="fas fa-tags"></i>
                    <span>ุงูููุชุฌุงุช</span>
                </a>
                <a href="#" class="nav-link" data-page="pos">
                    <i class="fas fa-cash-register"></i>
                    <span>ููุทุฉ ุงูุจูุน</span>
                </a>
                <a href="#" class="nav-link" data-page="invoices">
                    <i class="fas fa-file-invoice"></i>
                    <span>ุงูููุงุชูุฑ</span>
                </a>
                <a href="#" class="nav-link" data-page="customers">
                    <i class="fas fa-users"></i>
                    <span>ุงูุนููุงุก</span>
                </a>
                <a href="#" class="nav-link" data-page="inventory">
                    <i class="fas fa-boxes-stacked"></i>
                    <span>ุงููุฎุฒูู</span>
                </a>
                <a href="#" class="nav-link" data-page="employees">
                    <i class="fas fa-user-tie"></i>
                    <span>ุงูููุธููู</span>
                </a>
                <a href="#" class="nav-link" data-page="discounts">
                    <i class="fas fa-percent"></i>
                    <span>ุงูุนุฑูุถ ูุงูุฎุตููุงุช</span>
                </a>
                <a href="#" class="nav-link" data-page="returns">
                    <i class="fas fa-rotate-left"></i>
                    <span>ุงููุฑุชุฌุนุงุช</span>
                </a>
                <a href="#" class="nav-link" data-page="barcode">
                    <i class="fas fa-barcode"></i>
                    <span>ุทุงุจุนุฉ ุงูุจุงุฑููุฏ</span>
                </a>
                <a href="#" class="nav-link" data-page="reports">
                    <i class="fas fa-chart-line"></i>
                    <span>ุงูุชูุงุฑูุฑ</span>
                </a>
                <a href="#" class="nav-link" data-page="settings">
                    <i class="fas fa-gear"></i>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="btn-logout" id="logoutBtn">
                    <i class="fas fa-right-from-bracket"></i>
                    <span>ุชุณุฌูู ุงูุฎุฑูุฌ</span>
                </button>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- TOP BAR -->
            <header class="topbar">
                <div class="topbar-right">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 class="page-title" id="pageTitle">ููุญุฉ ุงูุชุญูู</h2>
                </div>
                <div class="topbar-left">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="ุจุญุซ ุณุฑูุน...">
                    </div>
                    <button class="topbar-icon-btn" id="notifBtn">
                        <i class="fas fa-bell"></i>
                        <span class="notif-badge" id="notifBadge">0</span>
                    </button>
                    <button class="topbar-icon-btn" id="themeToggle">
                        <i class="fas fa-moon" id="themeIcon"></i>
                    </button>
                    <div class="user-info">
                        <span id="currentUser">ุงููุฏูุฑ</span>
                        <i class="fas fa-user-circle"></i>
                    </div>
                </div>
            </header>

            <!-- NOTIFICATIONS PANEL -->
            <div class="notif-panel hidden" id="notifPanel">
                <div class="notif-header">
                    <h3>ุงูุฅุดุนุงุฑุงุช</h3>
                    <button class="btn-text" id="clearNotifs">ูุณุญ ุงููู</button>
                </div>
                <div class="notif-list" id="notifList"></div>
            </div>

            <!-- ============ DASHBOARD PAGE ============ -->
            <section class="page active" id="page-dashboard">
                <div class="stats-grid">
                    <div class="stat-card gold">
                        <div class="stat-icon"><i class="fas fa-coins"></i></div>
                        <div class="stat-info">
                            <h3 id="statSalesToday">0</h3>
                            <p>ูุจูุนุงุช ุงูููู</p>
                        </div>
                        <div class="stat-trend up"><i class="fas fa-arrow-up"></i></div>
                    </div>
                    <div class="stat-card emerald">
                        <div class="stat-icon"><i class="fas fa-shopping-bag"></i></div>
                        <div class="stat-info">
                            <h3 id="statOrders">0</h3>
                            <p>ุงูุทูุจุงุช</p>
                        </div>
                        <div class="stat-trend up"><i class="fas fa-arrow-up"></i></div>
                    </div>
                    <div class="stat-card rose">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <h3 id="statCustomers">0</h3>
                            <p>ุงูุนููุงุก</p>
                        </div>
                        <div class="stat-trend up"><i class="fas fa-arrow-up"></i></div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-icon"><i class="fas fa-box-open"></i></div>
                        <div class="stat-info">
                            <h3 id="statProducts">0</h3>
                            <p>ุงูููุชุฌุงุช</p>
                        </div>
                        <div class="stat-trend neutral"><i class="fas fa-minus"></i></div>
                    </div>
                </div>
                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>ุงููุจูุนุงุช ุงูุฃุณุจูุนูุฉ</h3>
                        <canvas id="salesChart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>ุฃูุซุฑ ุงูููุชุฌุงุช ูุจูุนุงู</h3>
                        <div class="chart-container">
                            <canvas id="topProductsChart" width="400" height="200"></canvas>
                            <div id="topProductsLegend" class="chart-legend"></div>
                        </div>
                    </div>
                </div>
                <div class="dashboard-bottom">
                    <div class="recent-card">
                        <h3><i class="fas fa-clock"></i> ุขุฎุฑ ุงููุจูุนุงุช</h3>
                        <div class="recent-list" id="recentSalesList"></div>
                    </div>
                    <div class="recent-card">
                        <h3><i class="fas fa-exclamation-triangle"></i> ุชูุจููุงุช ุงููุฎุฒูู</h3>
                        <div class="recent-list" id="lowStockList"></div>
                    </div>
                </div>
            </section>

            <!-- ============ PRODUCTS PAGE ============ -->
            <section class="page" id="page-products">
                <div class="page-header">
                    <div class="page-header-actions">
                        <button class="btn-primary" id="addProductBtn">
                            <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ
                        </button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="productSearch" placeholder="ุจุญุซ ุนู ููุชุฌ..." class="filter-input">
                        <select id="productCategoryFilter" class="filter-select">
                            <option value="">ูู ุงููุฆุงุช</option>
                        </select>
                    </div>
                </div>
                <div class="products-grid" id="productsGrid"></div>
            </section>

            <!-- ============ POS PAGE ============ -->
            <section class="page" id="page-pos">
                <button class="pos-cart-toggle-btn" id="posCartToggleBtn" style="display:none;">
                    <i class="fas fa-shopping-cart"></i> <span>ุชู ุงุฎุชูุงุฑ (<span id="mobileCartCount">0</span>)
                        ูุทุน</span>
                </button>
                <div class="pos-container">
                    <div class="pos-products-section">
                        <div class="pos-search">
                            <i class="fas fa-search"></i>
                            <input type="text" id="posSearch" placeholder="ุจุญุซ ุนู ููุชุฌ ุจุงูุงุณู ุฃู ุงูููุฏ...">
                        </div>
                        <div class="pos-categories" id="posCategories"></div>
                        <div class="pos-products-grid" id="posProductsGrid"></div>
                    </div>
                    <div class="pos-cart-section" id="posCartSection">
                        <div class="pos-cart-header">
                            <h3><i class="fas fa-shopping-cart"></i> ุณูุฉ ุงููุดุชุฑูุงุช</h3>
                            <button class="mobile-close-btn" id="closeCartBtn">
                                <i class="fas fa-times"></i>
                            </button>
                            <button class="btn-text danger" id="clearCartBtn">
                                <i class="fas fa-trash"></i> ูุณุญ
                            </button>
                        </div>
                        <div class="pos-cart-items" id="posCartItems">
                            <div class="empty-cart">
                                <i class="fas fa-cart-plus"></i>
                                <p>ุงูุณูุฉ ูุงุฑุบุฉ</p>
                            </div>
                        </div>
                        <div class="pos-customer">
                            <label><i class="fas fa-user"></i> ุงูุนููู</label>
                            <div class="customer-search-wrapper">
                                <input type="text" id="posCustomerSearch" placeholder="ุจุญุซ ุจุงุณู ุงูุนููู ุฃู ุงููุงุชู...">
                            </div>
                            <select id="posCustomerSelect">
                                <option value="">ุนููู ุนุงุจุฑ</option>
                            </select>
                        </div>
                        <div class="pos-discount-row">
                            <label>ููุจูู ุฎุตู:</label>
                            <input type="text" id="posCouponInput" placeholder="ุงุฏุฎู ุงูููุจูู">
                            <button class="btn-small" id="applyCouponBtn">ุชุทุจูู</button>
                        </div>
                        <div class="pos-cart-summary">
                            <div class="summary-row">
                                <span>ุงููุฌููุน:</span>
                                <span id="posSubtotal">0 ุฌ.ู</span>
                            </div>
                            <div class="summary-row discount-row hidden" id="posDiscountRow">
                                <span>ุงูุฎุตู:</span>
                                <span id="posDiscount">0 ุฌ.ู</span>
                            </div>
                            <div class="summary-row tax-row">
                                <span>ุงูุถุฑูุจุฉ (<span id="posTaxRate">0</span>%):</span>
                                <span id="posTax">0 ุฌ.ู</span>
                            </div>
                            <div class="summary-row total-row">
                                <span>ุงูุฅุฌูุงูู:</span>
                                <span id="posTotal">0 ุฌ.ู</span>
                            </div>
                        </div>
                        <div class="pos-payment-methods">
                            <label class="payment-option active" data-method="cash">
                                <i class="fas fa-money-bill-wave"></i> ูุงุด
                            </label>
                            <label class="payment-option" data-method="visa">
                                <i class="fas fa-credit-card"></i> ููุฒุง
                            </label>
                            <label class="payment-option" data-method="transfer">
                                <i class="fas fa-mobile-alt"></i> ุชุญููู
                            </label>
                        </div>
                        <button class="btn-checkout" id="checkoutBtn">
                            <i class="fas fa-check-circle"></i> ุฅุชูุงู ุงูุจูุน
                        </button>
                    </div>
                </div>
            </section>

            <!-- ============ INVOICES PAGE ============ -->
            <section class="page" id="page-invoices">
                <div class="page-header">
                    <div class="filter-bar">
                        <input type="text" id="invoiceSearch" placeholder="ุจุญุซ ุจุฑูู ุงููุงุชูุฑุฉ..." class="filter-input">
                        <input type="date" id="invoiceDateFilter" class="filter-input">
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="invoicesTable">
                        <thead>
                            <tr>
                                <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุนููู</th>
                                <th>ุงูููุชุฌุงุช</th>
                                <th>ุงูุฅุฌูุงูู</th>
                                <th>ุทุฑููุฉ ุงูุฏูุน</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="invoicesBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- ============ CUSTOMERS PAGE ============ -->
            <section class="page" id="page-customers">
                <div class="page-header">
                    <div class="page-header-actions">
                        <button class="btn-primary" id="addCustomerBtn">
                            <i class="fas fa-user-plus"></i> ุฅุถุงูุฉ ุนููู
                        </button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="customerSearch" placeholder="ุจุญุซ ุนู ุนููู..." class="filter-input">
                        <select id="customerTierFilter" class="filter-select">
                            <option value="">ูู ุงููุณุชููุงุช</option>
                            <option value="ุจุฑููุฒ">ุจุฑููุฒ</option>
                            <option value="ูุถู">ูุถู</option>
                            <option value="ุฐูุจู">ุฐูุจู</option>
                            <option value="VIP">VIP</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="customersTable">
                        <thead>
                            <tr>
                                <th>ุงูุงุณู</th>
                                <th>ุงููุงุชู</th>
                                <th>ุงููุณุชูู</th>
                                <th>ุงูููุงุท</th>
                                <th>ุฅุฌูุงูู ุงููุดุชุฑูุงุช</th>
                                <th>ุงูุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="customersBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- ============ INVENTORY PAGE ============ -->
            <section class="page" id="page-inventory">
                <div class="reports-filters" style="margin-bottom: 20px; display: flex; gap: 20px; flex-wrap: wrap;">
                    <div class="stat-card gold" style="flex: 1; min-width: 200px; padding: 15px;">
                        <div class="stat-icon" style="font-size: 1.5rem;"><i class="fas fa-vault"></i></div>
                        <div class="stat-info">
                            <h3 id="invTotalValueCost">0</h3>
                            <p>ุฅุฌูุงูู ุงููููุฉ (ุจุณุนุฑ ุงูุชูููุฉ)</p>
                        </div>
                    </div>
                    <div class="stat-card gold-2" style="flex: 1; min-width: 200px; padding: 15px;">
                        <div class="stat-icon" style="font-size: 1.5rem;"><i class="fas fa-hand-holding-dollar"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="invTotalValueSale">0</h3>
                            <p>ุฅุฌูุงูู ุงููููุฉ (ุจุณุนุฑ ุงูุจูุน)</p>
                        </div>
                    </div>
                    <div class="stat-card"
                        style="flex: 1; min-width: 200px; padding: 15px; border: 1px solid var(--border);">
                        <div class="stat-icon" style="font-size: 1.5rem; color: var(--gold-3);"><i
                                class="fas fa-box"></i></div>
                        <div class="stat-info">
                            <h3 id="invTotalItems">0</h3>
                            <p>ุฅุฌูุงูู ุนุฏุฏ ุงููุทุน</p>
                        </div>
                    </div>
                </div>

                <div class="page-header">
                    <div class="filter-bar">
                        <input type="text" id="inventorySearch" placeholder="ุจุญุซ ูู ุงููุฎุฒูู..." class="filter-input">
                        <select id="inventoryStockFilter" class="filter-select">
                            <option value="">ูู ุงูููุชุฌุงุช</option>
                            <option value="low">ูุฎุฒูู ููุฎูุถ</option>
                            <option value="out">ููุฏ ูู ุงููุฎุฒูู</option>
                            <option value="ok">ูุชููุฑ</option>
                        </select>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="inventoryTable">
                        <thead>
                            <tr>
                                <th>ุงูููุฏ</th>
                                <th>ุงูููุชุฌ</th>
                                <th>ุงููุฆุฉ</th>
                                <th>ุณุนุฑ ุงูุชูููุฉ</th>
                                <th>ุณุนุฑ ุงูุจูุน</th>
                                <th>ุงููููุฉ</th>
                                <th>ุงููููุฉ (ุจูุน)</th>
                                <th>ุงูุญุงูุฉ</th>
                                <th>ุงูุฃุฏูุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- ============ EMPLOYEES PAGE ============ -->
            <section class="page" id="page-employees">
                <div class="page-header">
                    <div class="page-header-actions">
                        <button class="btn-primary" id="addEmployeeBtn">
                            <i class="fas fa-user-plus"></i> ุฅุถุงูุฉ ููุธู
                        </button>
                    </div>
                </div>
                <div class="employees-grid" id="employeesGrid"></div>
            </section>

            <!-- ============ DISCOUNTS PAGE ============ -->
            <section class="page" id="page-discounts">
                <div class="page-header">
                    <div class="page-header-actions">
                        <button class="btn-primary" id="addDiscountBtn">
                            <i class="fas fa-plus"></i> ุฅุถุงูุฉ ุนุฑุถ
                        </button>
                    </div>
                </div>
                <div class="discounts-grid" id="discountsGrid"></div>
            </section>

            <!-- ============ RETURNS PAGE ============ -->
            <section class="page" id="page-returns">
                <div class="page-header">
                    <div class="page-header-actions">
                        <button class="btn-primary" id="addReturnBtn">
                            <i class="fas fa-rotate-left"></i> ุชุณุฌูู ูุฑุชุฌุน
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="data-table" id="returnsTable">
                        <thead>
                            <tr>
                                <th>ุฑูู ุงููุฑุชุฌุน</th>
                                <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                                <th>ุงูููุชุฌ</th>
                                <th>ุงูููู</th>
                                <th>ุงูููุงุณ</th>
                                <th>ุงููููุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงููุจูุบ</th>
                                <th>ุงูุฃุฏูุงุช</th>
                            </tr>
                        </thead>
                        <tbody id="returnsBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- ============ BARCODE PAGE ============ -->
            <section class="page" id="page-barcode">
                <div class="barcode-container">
                    <div class="barcode-controls">
                        <div class="settings-card">
                            <h3><i class="fas fa-search"></i> ุงุฎุชุฑ ุงูููุชุฌ ููุจุงุฑููุฏ</h3>
                            <div class="search-box mb-15">
                                <i class="fas fa-search"></i>
                                <input type="text" id="barcodeProductSearch" placeholder="ุจุญุซ ุจุงุณู ุงูููุชุฌ ุฃู ุงูููุฏ..."
                                    oninput="renderBarcodeList()">
                            </div>
                            <div class="barcode-product-list" id="barcodeProductList">
                                <!-- Products will be listed here -->
                            </div>
                        </div>
                    </div>
                    <div class="barcode-preview-section">
                        <div class="settings-card">
                            <h3><i class="fas fa-eye"></i> ูุนุงููุฉ ุงูุจุงุฑููุฏ</h3>
                            <div id="barcodePreviewArea" class="barcode-preview-area">
                                <div class="empty-preview">ุฅุฎุชุฑ ููุชุฌุงู ูููุนุงููุฉ</div>
                            </div>
                            <div class="barcode-actions mt-20 hidden" id="barcodeActions">
                                <button class="btn-primary w-100" id="printBarcodeBtn">
                                    <i class="fas fa-print"></i> ุทุจุงุนุฉ ุงูุจุงุฑููุฏ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ============ REPORTS PAGE ============ -->
            <section class="page" id="page-reports">
                <div class="reports-filters">
                    <select id="reportType" class="filter-select">
                        <option value="daily">ุชูุฑูุฑ ูููู</option>
                        <option value="weekly">ุชูุฑูุฑ ุฃุณุจูุนู</option>
                        <option value="monthly">ุชูุฑูุฑ ุดูุฑู</option>
                    </select>
                    <input type="date" id="reportDate" class="filter-input">
                    <button class="btn-primary" id="generateReportBtn">
                        <i class="fas fa-chart-bar"></i> ุนุฑุถ ุงูุชูุฑูุฑ
                    </button>
                    <button class="btn-secondary" id="exportReportBtn">
                        <i class="fas fa-download"></i> ุชุตุฏูุฑ
                    </button>
                </div>
                <div class="report-stats" id="reportStats"></div>
                <div class="chart-card">
                    <h3>ุฑุณู ุจูุงูู ูููุจูุนุงุช</h3>
                    <canvas id="reportChart" width="800" height="300"></canvas>
                </div>
                <div class="table-container">
                    <table class="data-table" id="reportTable">
                        <thead>
                            <tr>
                                <th>ุฑูู ุงููุงุชูุฑุฉ</th>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุนููู</th>
                                <th>ุงูููุชุฌุงุช</th>
                                <th>ุงูุฅุฌูุงูู</th>
                            </tr>
                        </thead>
                        <tbody id="reportBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- ============ SETTINGS PAGE ============ -->
            <section class="page" id="page-settings">
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3><i class="fas fa-store"></i> ูุนูููุงุช ุงููุญู</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ุงุณู ุงููุญู</label>
                                <input type="text" id="settStoreName" value="JAYA Clothing Store">
                            </div>
                            <div class="form-group">
                                <label>ุงูุนููุงู</label>
                                <input type="text" id="settStoreAddress" placeholder="ุนููุงู ุงููุญู">
                            </div>
                            <div class="form-group">
                                <label>ุงููุงุชู</label>
                                <input type="text" id="settStorePhone" placeholder="ุฑูู ุงููุงุชู">
                            </div>
                            <button class="btn-primary" id="saveStoreInfoBtn">
                                <i class="fas fa-save"></i> ุญูุธ
                            </button>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-percent"></i> ุงูุถุฑุงุฆุจ</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ูุณุจุฉ ุงูุถุฑูุจุฉ (%)</label>
                                <input type="number" id="settTaxRate" value="0" min="0" max="100">
                            </div>
                            <button class="btn-primary" id="saveTaxBtn">
                                <i class="fas fa-save"></i> ุญูุธ
                            </button>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-money-bill"></i> ุงูุนููุฉ</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ุงูุนููุฉ</label>
                                <select id="settCurrency">
                                    <option value="ุฌ.ู">ุฌููู ูุตุฑู (ุฌ.ู)</option>
                                    <option value="ุฑ.ุณ">ุฑูุงู ุณุนูุฏู (ุฑ.ุณ)</option>
                                    <option value="ุฏ.ุฅ">ุฏุฑูู ุฅูุงุฑุงุชู (ุฏ.ุฅ)</option>
                                    <option value="$">ุฏููุงุฑ ($)</option>
                                </select>
                            </div>
                            <button class="btn-primary" id="saveCurrencyBtn">
                                <i class="fas fa-save"></i> ุญูุธ
                            </button>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-hashtag"></i> ุชุฑููู ุงูููุงุชูุฑ</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ุฑูู ุงููุงุชูุฑุฉ ุงููุงุฏูุฉ</label>
                                <input type="number" id="settNextInvoiceNumber" value="1" min="1">
                            </div>
                            <button class="btn-primary" id="saveInvoiceNumBtn">
                                <i class="fas fa-save"></i> ุญูุธ
                            </button>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-database"></i> ุงููุณุฎ ุงูุงุญุชูุงุทู</h3>
                        <div class="settings-form">
                            <button class="btn-primary" id="exportDataBtn">
                                <i class="fas fa-download"></i> ุชุตุฏูุฑ ุงูุจูุงูุงุช
                            </button>
                            <label class="btn-secondary file-upload-btn" style="margin-top:10px;">
                                <i class="fas fa-upload"></i> ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช
                                <input type="file" id="importDataInput" accept=".json" style="display:none;">
                            </label>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-user-shield"></i> ุฅุฏุงุฑุฉ ุญุณุงุจ ุงููุฏูุฑ</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ุงุณู ูุณุชุฎุฏู ุงููุฏูุฑ ุงูุฌุฏูุฏ</label>
                                <input type="text" id="newAdminUsername" placeholder="ุงุชุฑูู ูุงุฑุบุงู ููุญูุงุธ ุนูู ุงูุญุงูู">
                            </div>
                            <div class="form-group">
                                <label>ูููุฉ ูุฑูุฑ ุงููุฏูุฑ ุงูุฌุฏูุฏุฉ</label>
                                <input type="password" id="newAdminPassword" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                            </div>
                            <div class="form-group">
                                <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                                <input type="password" id="confirmAdminPassword" placeholder="ุฃุนุฏ ูุชุงุจุฉ ูููุฉ ุงููุฑูุฑ">
                            </div>
                            <button class="btn-primary" id="updateAdminBtn">
                                <i class="fas fa-key"></i> ุชุญุฏูุซ ุจูุงูุงุช ุงููุฏูุฑ
                            </button>
                        </div>
                    </div>
                    <div class="settings-card" style="grid-column: 1 / -1;">
                        <h3><i class="fas fa-receipt"></i> ุชุตููู ุงูุจูู</h3>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                            <!-- Controls -->
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>ูุญุงุฐุงุฉ ุงููุต</label>
                                    <select id="rcptAlign" onchange="updateReceiptPreview()">
                                        <option value="center">ูุณุท</option>
                                        <option value="right">ูููู</option>
                                        <option value="left">ูุณุงุฑ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>ุญุฌู ุฎุท ุงุณู ุงููุญู (pt)</label>
                                    <input type="number" id="rcptTitleSize" value="14" min="8" max="24"
                                        onchange="updateReceiptPreview()">
                                </div>
                                <div class="form-group">
                                    <label>ุญุฌู ุฎุท ุงูุจูุงูุงุช (pt)</label>
                                    <input type="number" id="rcptBodySize" value="9" min="6" max="16"
                                        onchange="updateReceiptPreview()">
                                </div>
                                <div class="form-group">
                                    <label>ูุงูุด ุงููุฑู (px)</label>
                                    <input type="number" id="rcptPadding" value="5" min="0" max="30"
                                        onchange="updateReceiptPreview()">
                                </div>
                                <div class="form-group">
                                    <label>ุนุฑุถ ุงูุจูู (mm)</label>
                                    <input type="number" id="rcptWidth" value="80" min="48" max="110"
                                        onchange="updateReceiptPreview()">
                                </div>
                                <div
                                    style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:10px; border-top:1px dashed var(--border); padding-top:10px;">
                                    <div class="form-group">
                                        <label>ูุณูู ุงูููุชุฌ</label>
                                        <input type="text" id="rcptLblName" value="ุงูููุชุฌ"
                                            onchange="updateReceiptPreview()">
                                    </div>
                                    <div class="form-group">
                                        <label>ูุณูู ุงูุณุนุฑ</label>
                                        <input type="text" id="rcptLblPrice" value="ุงูุณุนุฑ"
                                            onchange="updateReceiptPreview()">
                                    </div>
                                    <div class="form-group">
                                        <label>ูุณูู ุงููููุฉ</label>
                                        <input type="text" id="rcptLblQty" value="ู" onchange="updateReceiptPreview()">
                                    </div>
                                    <div class="form-group">
                                        <label>ูุณูู ุงูุฌููุฉ</label>
                                        <input type="text" id="rcptLblTotal" value="ุงูุฌููุฉ"
                                            onchange="updateReceiptPreview()">
                                    </div>
                                </div>
                                <div style="display:flex; flex-wrap:wrap; gap:12px; margin:10px 0;">
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowLogo" checked onchange="updateReceiptPreview()">
                                        ุงูุดุนุงุฑ</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowName" checked onchange="updateReceiptPreview()">
                                        ุงุณู ุงููุญู</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowAddr" checked onchange="updateReceiptPreview()">
                                        ุงูุนููุงู</label>
                                    <label
                                        style="display:flex;align-items:center;gap:5px;cursor:pointer;color:var(--gold-4);font-weight:700;"><input
                                            type="checkbox" id="rcptCenterPrint" onchange="updateReceiptPreview()">
                                        ุชูุณูุท ุชููุงุฆู (ุถุจุท ุงูุทุจุงุนุฉ)</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowPhone" checked
                                            onchange="updateReceiptPreview()"> ุงููุงุชู</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowInvNum" checked
                                            onchange="updateReceiptPreview()"> ุฑูู ุงููุงุชูุฑุฉ</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowDate" checked onchange="updateReceiptPreview()">
                                        ุงูุชุงุฑูุฎ</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowCustomer" checked
                                            onchange="updateReceiptPreview()"> ุงูุนููู</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowPayment" checked
                                            onchange="updateReceiptPreview()"> ุทุฑููุฉ ุงูุฏูุน</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowTerms" checked
                                            onchange="updateReceiptPreview()"> ุงูุดุฑูุท</label>
                                    <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input
                                            type="checkbox" id="rcptShowFooter" checked
                                            onchange="updateReceiptPreview()"> ุงูุชุฐููู</label>
                                </div>
                                <div class="form-group">
                                    <label>ุชุบููุฑ ุดุนุงุฑ ุงูุจูู</label>
                                    <input type="file" id="rcptLogoUpload" accept="image/*"
                                        onchange="handleLogoUpload(event)" style="font-size:0.85rem;">
                                    <small style="color:var(--text-muted);">ุงุฎุชุฑ ุตูุฑุฉ ููุดุนุงุฑ (ููุถู ูุฑุจุนุฉ)</small>
                                </div>
                                <div class="form-group">
                                    <label>ุชุฃุซูุฑุงุช ููุณููุฉ</label>
                                    <select id="rcptEffect" onchange="updateReceiptPreview()">
                                        <option value="none">ุจุฏูู ุชุฃุซูุฑ</option>
                                        <option value="ramadan">๐ ุฑูุถุงู ูุฑูู (ููุงููุณ ูููุงู)</option>
                                        <option value="eid">๐ ุนูุฏ ูุจุงุฑู (ุฒููุฉ)</option>
                                        <option value="sale">๐ฅ ุชุฎููุถุงุช (ูุงุฑ)</option>
                                        <option value="winter">โ๏ธ ุดุชุงุก (ุซูุฌ)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>ุฑุณุงูุฉ ุงูุฑุฃุณ</label>
                                    <input type="text" id="settInvoiceHeader" placeholder="ูุซุงู: ุฃููุงู ุจูู ูู JAYA"
                                        oninput="updateReceiptPreview()">
                                </div>
                                <div class="form-group">
                                    <label>ุฑุณุงูุฉ ุงูุชุฐููู</label>
                                    <input type="text" id="settInvoiceFooter" placeholder="ูุซุงู: ุดูุฑุงู ูุชุณูููู ูุนูุง"
                                        oninput="updateReceiptPreview()">
                                </div>
                                <div class="form-group">
                                    <label>ุงูุดุฑูุท ูุงูุฃุญูุงู</label>
                                    <textarea id="settInvoiceTerms" placeholder="ุดุฑูุท ุงูุงุณุชุจุฏุงู ูุงูุชุฑุฌูุน..." rows="3"
                                        oninput="updateReceiptPreview()"></textarea>
                                </div>
                                <button class="btn-primary" id="saveInvoiceTemplateBtn">
                                    <i class="fas fa-save"></i> ุญูุธ ุชุตููู ุงูุจูู
                                </button>
                            </div>
                            <!-- Live Preview -->
                            <div>
                                <label
                                    style="display:block;margin-bottom:10px;font-weight:700;color:var(--text-secondary);"><i
                                        class="fas fa-eye"></i> ูุนุงููุฉ ูุจุงุดุฑุฉ</label>
                                <div id="receiptPreviewBox"
                                    style="background:#fff; color:#000; border:1px dashed var(--border); border-radius:8px; overflow:auto; max-height:600px; display:flex; justify-content:center;">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="settings-card">
                        <h3><i class="fas fa-shield-alt"></i> ุงูุฃูุงู</h3>
                        <div class="settings-form">
                            <div class="form-group">
                                <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
                                <input type="password" id="settNewPassword" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
                            </div>
                            <div class="form-group">
                                <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
                                <input type="password" id="settConfirmPassword" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ">
                            </div>
                            <button class="btn-primary" id="changePasswordBtn">
                                <i class="fas fa-key"></i> ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
                            </button>
                        </div>
                        <div class="settings-card">
                            <h3><i class="fas fa-list"></i> ูุฆุงุช ุงูููุชุฌุงุช</h3>
                            <div class="settings-form">
                                <div class="categories-list" id="categoriesList"></div>
                                <div class="add-cat-row">
                                    <input type="text" id="newCategoryInput" placeholder="ุงุณู ุงููุฆุฉ ุงูุฌุฏูุฏุฉ">
                                    <button class="btn-small" id="addCategoryBtn"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="settings-card danger-zone"
                            style="border: 2px solid var(--red); background: rgba(231,76,60,0.05);">
                            <h3 style="color: var(--red);"><i class="fas fa-radiation"></i> ููุทูุฉ ุงูุฎุทุฑ</h3>
                            <p style="font-size: 0.85rem; margin-bottom: 10px; color: var(--text-secondary);">ุชูุจูู: ูุฐุง
                                ุงูุฅุฌุฑุงุก ุณูููู ุจุญุฐู ูุงูุฉ ุงูููุชุฌุงุชุ ุงูููุงุชูุฑุ ูุงูุนููุงุก ุจุดูู ููุงุฆู ููุง ูููู ุงูุชุฑุงุฌุน ุนูู.
                            </p>
                            <div class="settings-form">
                                <button class="btn-primary" id="resetSystemBtn"
                                    style="background: var(--red); border-color: var(--red);">
                                    <i class="fas fa-trash-can"></i> ุชุตููุฑ ุงููุธุงู ุจุงููุงูู
                                </button>
                            </div>
                        </div>
                    </div>
            </section>
        </main>
    </div>

    <!-- ============ MODALS ============ -->

    <!-- Product Modal -->
    <div class="modal-overlay hidden" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="productModalTitle">ุฅุถุงูุฉ ููุชุฌ</h3>
                <button class="modal-close" data-close="productModal">&times;</button>
            </div>
            <form id="productForm" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงุณู ุงูููุชุฌ *</label>
                        <input type="text" id="prodName" required>
                    </div>
                    <div class="form-group">
                        <label>ููุฏ ุงูููุชุฌ *</label>
                        <input type="text" id="prodCode" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงููุฆุฉ *</label>
                        <select id="prodCategory" required></select>
                    </div>
                    <div class="form-group">
                        <label>ุณุนุฑ ุงูุดุฑุงุก *</label>
                        <input type="number" id="prodCostPrice" min="0" step="0.01" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุณุนุฑ ุงูุจูุน *</label>
                        <input type="number" id="prodSalePrice" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>ุงููููุฉ ุงูุฅุฌูุงููุฉ (ูุญุณูุจุฉ) *</label>
                        <input type="number" id="prodQuantity" min="0" value="0" readonly
                            style="background: var(--bg-secondary); cursor: not-allowed;">
                    </div>
                </div>
                <!-- Variant Inventory Inputs Container -->
                <div id="variantInventoryFields" style="margin-bottom: 20px; overflow-x: auto;">
                    <table class="inventory-table hidden" id="variantInventoryTable">
                        <thead>
                            <tr id="variantTableHead"></tr>
                        </thead>
                        <tbody id="variantTableBody"></tbody>
                    </table>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุฃุญุฌุงู ุงููุชุงุญุฉ</label>
                        <div class="size-checkboxes">
                            <label><input type="checkbox" value="L"> L</label>
                            <label><input type="checkbox" value="XL"> XL</label>
                            <label><input type="checkbox" value="2XL"> 2XL</label>
                            <label><input type="checkbox" value="3XL"> 3XL</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ุงูุฃููุงู ุงููุชุงุญุฉ (ุงุถุบุท Enter ููุฅุถุงูุฉ)</label>
                        <div class="color-tags-wrapper">
                            <div id="colorTagsContainer" class="color-tags-container"></div>
                            <input type="text" id="prodColorsInput" placeholder="ุฃุถู ูููุงู...">
                        </div>
                        <input type="hidden" id="prodColors"> <!-- Keeps compatibility -->
                    </div>
                </div>
                <div class="form-group">
                    <label>ูุตู ุงูููุชุฌ</label>
                    <textarea id="prodDescription" rows="3"></textarea>
                </div>
                <input type="hidden" id="prodId">
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> ุญูุธ
                    </button>
                    <button type="button" class="btn-secondary" data-close="productModal">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Modal -->
    <div class="modal-overlay hidden" id="customerModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="customerModalTitle">ุฅุถุงูุฉ ุนููู</h3>
                <button class="modal-close" data-close="customerModal">&times;</button>
            </div>
            <form id="customerForm" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงุณู ุงูุนููู *</label>
                        <input type="text" id="custName" required>
                    </div>
                    <div class="form-group">
                        <label>ุฑูู ุงููุงุชู *</label>
                        <input type="text" id="custPhone" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="custEmail">
                    </div>
                    <div class="form-group">
                        <label>ุงูุนููุงู</label>
                        <input type="text" id="custAddress">
                    </div>
                </div>
                <div class="form-group">
                    <label>ููุงุญุธุงุช</label>
                    <textarea id="custNotes" rows="2"></textarea>
                </div>
                <input type="hidden" id="custId">
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> ุญูุธ
                    </button>
                    <button type="button" class="btn-secondary" data-close="customerModal">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Employee Modal -->
    <div class="modal-overlay hidden" id="employeeModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="employeeModalTitle">ุฅุถุงูุฉ ููุธู</h3>
                <button class="modal-close" data-close="employeeModal">&times;</button>
            </div>
            <form id="employeeForm" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงุณู ุงูููุธู *</label>
                        <input type="text" id="empName" required>
                    </div>
                    <div class="form-group">
                        <label>ุฑูู ุงููุงุชู *</label>
                        <input type="text" id="empPhone" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงููุธููุฉ *</label>
                        <input type="text" id="empRole" required>
                    </div>
                    <div class="form-group">
                        <label>ุงูุฑุงุชุจ</label>
                        <input type="number" id="empSalary" min="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงุณู ุงููุณุชุฎุฏู</label>
                        <input type="text" id="empUsername">
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงููุฑูุฑ</label>
                        <input type="password" id="empPassword">
                    </div>
                </div>
                <div class="form-group">
                    <label>ููุน ุงูุตูุงุญูุฉ</label>
                    <select id="empPermission" onchange="togglePagePerms()">
                        <option value="employee">ููุธู</option>
                        <option value="admin">ูุฏูุฑ (ูู ุงูุตูุงุญูุงุช)</option>
                    </select>
                </div>
                <div class="form-group" id="pagePermsGroup"
                    style="border:1px solid var(--border);border-radius:8px;padding:12px;background:var(--input-bg);">
                    <label style="margin-bottom:8px;display:block;font-weight:700;"><i class="fas fa-lock"></i> ุงูุตูุญุงุช
                        ุงููุณููุญ ุจูุง</label>
                    <div style="display:flex;flex-wrap:wrap;gap:10px;">
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="dashboard" checked> ููุญุฉ ุงูุชุญูู</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="pos" checked> ููุทุฉ ุงูุจูุน</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="products"> ุงูููุชุฌุงุช</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="invoices"> ุงูููุงุชูุฑ</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="customers"> ุงูุนููุงุก</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="inventory"> ุงููุฎุฒูู</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="employees"> ุงูููุธููู</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="discounts"> ุงูุฎุตููุงุช</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="returns"> ุงููุฑุชุฌุนุงุช</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="reports"> ุงูุชูุงุฑูุฑ</label>
                        <label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox"
                                class="empPagePerm" value="settings"> ุงูุฅุนุฏุงุฏุงุช</label>
                    </div>
                </div>
                <input type="hidden" id="empId">
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> ุญูุธ
                    </button>
                    <button type="button" class="btn-secondary" data-close="employeeModal">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Discount Modal -->
    <div class="modal-overlay hidden" id="discountModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="discountModalTitle">ุฅุถุงูุฉ ุนุฑุถ</h3>
                <button class="modal-close" data-close="discountModal">&times;</button>
            </div>
            <form id="discountForm" class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label>ุงุณู ุงูุนุฑุถ *</label>
                        <input type="text" id="discName" required>
                    </div>
                    <div class="form-group">
                        <label>ููุฏ ุงูููุจูู *</label>
                        <input type="text" id="discCode" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ููุน ุงูุฎุตู</label>
                        <select id="discType">
                            <option value="percentage">ูุณุจุฉ ูุฆููุฉ %</option>
                            <option value="fixed">ูุจูุบ ุซุงุจุช</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ูููุฉ ุงูุฎุตู *</label>
                        <input type="number" id="discValue" min="0" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>ุชุงุฑูุฎ ุงูุจุฏุงูุฉ *</label>
                        <input type="date" id="discStart" required>
                    </div>
                    <div class="form-group">
                        <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก *</label>
                        <input type="date" id="discEnd" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>ุงูุญุฏ ุงูุฃุฏูู ููุดุฑุงุก</label>
                    <input type="number" id="discMinPurchase" min="0" value="0">
                </div>
                <input type="hidden" id="discId">
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i> ุญูุธ
                    </button>
                    <button type="button" class="btn-secondary" data-close="discountModal">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- POS Product Selection Modal -->
    <div class="modal-overlay hidden" id="posSelectionModal">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3 id="selProdName">ุชุฎุตูุต ุงูููุชุฌ</h3>
                <button class="modal-close" data-close="posSelectionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="selection-section">
                    <label>ุงุฎุชุฑ ุงูููุงุณ:</label>
                    <div id="selProdSizes" class="selection-grid"></div>
                </div>
                <div class="selection-section">
                    <label>ุงุฎุชุฑ ุงูููู:</label>
                    <div id="selProdColors" class="selection-grid"></div>
                </div>
                <input type="hidden" id="selProdId">
            </div>
            <div class="modal-footer">
                <button class="btn-primary w-100" id="confirmPosAdd">
                    <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุณูุฉ
                </button>
            </div>
        </div>
    </div>

    <!-- Walk-in Customer Data Modal -->
    <div class="modal-overlay hidden" id="walkInModal">
        <div class="modal modal-sm">
            <div class="modal-header">
                <h3>ุจูุงูุงุช ุงูุนููู (ุงุฎุชูุงุฑู)</h3>
                <button class="modal-close" data-close="walkInModal">&times;</button>
            </div>
            <div class="form-body" style="padding:20px;">
                <p style="margin-bottom:15px;color:var(--text-secondary);font-size:0.9rem;">ููููู ุฅุฏุฎุงู ุจูุงูุงุช ุงูุนููู
                    ูุฅุถุงูุชู ููุงุฆูุฉ ุนููุงุฆู ุงูุฏุงุฆููู ูุชุฌููุน ููุงุทุ ุฃู ุงูุชุฎุทู ูุฅุชูุงู ุงูุนูููุฉ ูุนููู ุนุงุจุฑ.</p>
                <div class="form-group">
                    <label>ุงุณู ุงูุนููู</label>
                    <input type="text" id="walkInName" placeholder="ูุซุงู: ุณุงุฑุฉ ุฃุญูุฏ">
                </div>
                <div class="form-group">
                    <label>ุฑูู ุงููุงุชู</label>
                    <input type="text" id="walkInPhone" placeholder="05XXXXXXXX">
                </div>
                <div class="form-group">
                    <label>ุงูุนููุงู</label>
                    <input type="text" id="walkInAddress" placeholder="ุงูุญู ุงูุดุงุฑุน ุงููุฌุงูุฑุฉ...">
                </div>
            </div>
            <div class="modal-footer" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;">
                <button class="btn-primary" id="saveWalkInBtn">ุญูุธ ููุชุงุจุนุฉ</button>
                <button class="btn-secondary" id="skipWalkInBtn">ุชุฎุทู (ุนููู ุนุงุจุฑ)</button>
            </div>
        </div>
    </div>

    <!-- Return Modal -->
    <div class="modal-overlay hidden" id="returnModal">
        <div class="modal">
            <div class="modal-header">
                <h3>ุงุณุชุจุฏุงู ููุชุฌ</h3>
                <button class="modal-close" data-close="returnModal">&times;</button>
            </div>
            <form id="returnForm" class="modal-body">
                <div class="form-group">
                    <label>ุฑูู ุงููุงุชูุฑุฉ *</label>
                    <select id="retInvoiceId" required></select>
                </div>

                <!-- Original Invoice Details (Dynamic) -->
                <div id="exchInvoiceDetails" class="hidden"
                    style="margin-bottom: 20px; border: 1px dashed var(--gold-3); padding: 10px; border-radius: var(--radius-sm); background: rgba(139,105,20,0.05);">
                    <h4 style="color: var(--gold-3); margin-bottom: 8px; font-size: 0.9rem;"><i
                            class="fas fa-receipt"></i> ูุญุชููุงุช ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ</h4>
                    <div id="exchInvoiceItemsList" style="font-size: 0.85rem; line-height: 1.6;"></div>
                </div>

                <div id="exchWarning" class="hidden"
                    style="color: var(--red); background: rgba(231,76,60,0.1); padding: 10px; border-radius: var(--radius-sm); margin-bottom: 15px; font-weight: 600; text-align: center;">
                    <i class="fas fa-exclamation-triangle"></i> ูุฐู ุงููุงุชูุฑุฉ ุชู ุงุณุชุจุฏุงููุง ูุณุจูุงู!
                </div>
                <div class="form-group">
                    <label>ุงูููุชุฌ *</label>
                    <select id="retProductId" required></select>
                </div>
                <div class="form-group">
                    <label>ุงููููุฉ *</label>
                    <input type="number" id="retQuantity" min="1" value="1" required>
                </div>
                <div class="form-group hidden">
                    <input type="hidden" id="retType" value="exchange">
                </div>
                <div class="form-group">
                    <label>ุงูุณุจุจ *</label>
                    <select id="retReason" required>
                        <option value="ุนูุจ ูู ุงูููุชุฌ">ุนูุจ ูู ุงูููุชุฌ</option>
                        <option value="ููุงุณ ุบูุฑ ููุงุณุจ">ููุงุณ ุบูุฑ ููุงุณุจ</option>
                        <option value="ููู ูุฎุชูู">ููู ูุฎุชูู</option>
                        <option value="ุชุบููุฑ ุฑุฃู ุงูุนููู">ุชุบููุฑ ุฑุฃู ุงูุนููู</option>
                        <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                    </select>
                </div>

                <!-- Fields for Exchange only (Now Always Visible) -->
                <div id="exchangeFields"
                    style="margin-top:15px; border-top:1px dashed var(--border); padding-top:15px;">
                    <h4 style="margin-bottom:10px; color:var(--gold-3);"><i class="fas fa-sync-alt"></i> ุจูุงูุงุช ุงูููุชุฌ
                        ุงูุจุฏูู</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ุงูููุชุฌ ุงูุจุฏูู *</label>
                            <select id="exchNewProductId"></select>
                        </div>
                        <div class="form-group">
                            <label>ุงูููุงุณ</label>
                            <select id="exchNewSize"></select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ุงูููู</label>
                            <select id="exchNewColor"></select>
                        </div>
                        <div class="form-group">
                            <label>ุงููููุฉ</label>
                            <input type="number" id="exchNewQty" value="1" min="1">
                        </div>
                    </div>
                </div>

                <!-- Summary / Difference -->
                <div id="retSummary"
                    style="margin-top:15px; background:var(--bg-secondary); padding:10px; border-radius:var(--radius-sm); border:1px solid var(--border);">
                    <div class="summary-row" id="retSummaryText" style="font-weight:700; color:var(--gold-4);">
                        ูุฑู ุงูุณุนุฑ: 0 ุฌ.ู
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-check-double"></i> ุฅุชูุงู ุนูููุฉ ุงูุงุณุชุจุฏุงู
                    </button>
                    <button type="button" class="btn-secondary" data-close="returnModal">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Invoice Print Modal -->
    <div class="modal-overlay hidden" id="invoicePrintModal">
        <div class="modal modal-lg">
            <div class="modal-header">
                <h3>ุงููุงุชูุฑุฉ</h3>
                <div class="modal-header-actions">
                    <button class="btn-primary" id="printInvoiceBtn">
                        <i class="fas fa-print"></i> ุทุจุงุนุฉ
                    </button>
                    <button class="modal-close" data-close="invoicePrintModal">&times;</button>
                </div>
            </div>
            <div class="modal-body" id="invoicePrintContent"></div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
    <script src="app2.js"></script>
    <script src="app3.js"></script>
</body>

</html>